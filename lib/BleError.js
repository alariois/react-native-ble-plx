var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.BleIOSErrorCode=exports.BleErrorCodeMessage=exports.BleErrorCode=exports.BleError=exports.BleAndroidErrorCode=exports.BleATTErrorCode=void 0;exports.parseBleError=parseBleError;var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));var _wrapNativeSuper2=_interopRequireDefault(require("@babel/runtime/helpers/wrapNativeSuper"));var _Utils=require("./Utils");var _BleErrorCodeMessage;function _callSuper(t,o,e){return o=(0,_getPrototypeOf2.default)(o),(0,_possibleConstructorReturn2.default)(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],(0,_getPrototypeOf2.default)(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}var BleError=exports.BleError=function(_Error){function BleError(nativeBleError,errorMessageMapping){var _this;(0,_classCallCheck2.default)(this,BleError);_this=_callSuper(this,BleError);_this.message=errorMessageMapping[BleErrorCode.UnknownError];if(typeof nativeBleError==='string'){_this.errorCode=BleErrorCode.UnknownError;_this.attErrorCode=null;_this.iosErrorCode=null;_this.androidErrorCode=null;_this.reason=nativeBleError;}else{var message=errorMessageMapping[nativeBleError.errorCode];if(message){_this.message=(0,_Utils.fillStringWithArguments)(message,nativeBleError);}_this.errorCode=nativeBleError.errorCode;_this.attErrorCode=nativeBleError.attErrorCode;_this.iosErrorCode=nativeBleError.iosErrorCode;_this.androidErrorCode=nativeBleError.androidErrorCode;_this.reason=nativeBleError.reason;}_this.name='BleError';return _this;}(0,_inherits2.default)(BleError,_Error);return(0,_createClass2.default)(BleError);}((0,_wrapNativeSuper2.default)(Error));function parseBleError(errorMessage,errorMessageMapping){var bleError;var errorMapping=errorMessageMapping?errorMessageMapping:BleErrorCodeMessage;try{var nativeBleError=JSON.parse(errorMessage);bleError=new BleError(nativeBleError,errorMapping);}catch(parseError){bleError=new BleError(errorMessage,errorMapping);}return bleError;}var BleErrorCode=exports.BleErrorCode={UnknownError:0,BluetoothManagerDestroyed:1,OperationCancelled:2,OperationTimedOut:3,OperationStartFailed:4,InvalidIdentifiers:5,BluetoothUnsupported:100,BluetoothUnauthorized:101,BluetoothPoweredOff:102,BluetoothInUnknownState:103,BluetoothResetting:104,BluetoothStateChangeFailed:105,DeviceConnectionFailed:200,DeviceDisconnected:201,DeviceRSSIReadFailed:202,DeviceAlreadyConnected:203,DeviceNotFound:204,DeviceNotConnected:205,DeviceMTUChangeFailed:206,ServicesDiscoveryFailed:300,IncludedServicesDiscoveryFailed:301,ServiceNotFound:302,ServicesNotDiscovered:303,CharacteristicsDiscoveryFailed:400,CharacteristicWriteFailed:401,CharacteristicReadFailed:402,CharacteristicNotifyChangeFailed:403,CharacteristicNotFound:404,CharacteristicsNotDiscovered:405,CharacteristicInvalidDataFormat:406,DescriptorsDiscoveryFailed:500,DescriptorWriteFailed:501,DescriptorReadFailed:502,DescriptorNotFound:503,DescriptorsNotDiscovered:504,DescriptorInvalidDataFormat:505,DescriptorWriteNotAllowed:506,ScanStartFailed:600,LocationServicesDisabled:601};var BleErrorCodeMessage=exports.BleErrorCodeMessage=(_BleErrorCodeMessage={},(0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)(_BleErrorCodeMessage,BleErrorCode.UnknownError,'Unknown error occurred. This is probably a bug! Check reason property.'),BleErrorCode.BluetoothManagerDestroyed,'BleManager was destroyed'),BleErrorCode.OperationCancelled,'Operation was cancelled'),BleErrorCode.OperationTimedOut,'Operation timed out'),BleErrorCode.OperationStartFailed,'Operation was rejected'),BleErrorCode.InvalidIdentifiers,'Invalid UUIDs or IDs were passed: {internalMessage}'),BleErrorCode.BluetoothUnsupported,'BluetoothLE is unsupported on this device'),BleErrorCode.BluetoothUnauthorized,'Device is not authorized to use BluetoothLE'),BleErrorCode.BluetoothPoweredOff,'BluetoothLE is powered off'),BleErrorCode.BluetoothInUnknownState,'BluetoothLE is in unknown state'),(0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)(_BleErrorCodeMessage,BleErrorCode.BluetoothResetting,'BluetoothLE is resetting'),BleErrorCode.BluetoothStateChangeFailed,'Bluetooth state change failed'),BleErrorCode.DeviceConnectionFailed,'Device {deviceID} connection failed'),BleErrorCode.DeviceDisconnected,'Device {deviceID} was disconnected'),BleErrorCode.DeviceRSSIReadFailed,'RSSI read failed for device {deviceID}'),BleErrorCode.DeviceAlreadyConnected,'Device {deviceID} is already connected'),BleErrorCode.DeviceNotFound,'Device {deviceID} not found'),BleErrorCode.DeviceNotConnected,'Device {deviceID} is not connected'),BleErrorCode.DeviceMTUChangeFailed,'Device {deviceID} could not change MTU size'),BleErrorCode.ServicesDiscoveryFailed,'Services discovery failed for device {deviceID}'),(0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)(_BleErrorCodeMessage,BleErrorCode.IncludedServicesDiscoveryFailed,'Included services discovery failed for device {deviceID} and service: {serviceUUID}'),BleErrorCode.ServiceNotFound,'Service {serviceUUID} for device {deviceID} not found'),BleErrorCode.ServicesNotDiscovered,'Services not discovered for device {deviceID}'),BleErrorCode.CharacteristicsDiscoveryFailed,'Characteristic discovery failed for device {deviceID} and service {serviceUUID}'),BleErrorCode.CharacteristicWriteFailed,'Characteristic {characteristicUUID} write failed for device {deviceID} and service {serviceUUID}'),BleErrorCode.CharacteristicReadFailed,'Characteristic {characteristicUUID} read failed for device {deviceID} and service {serviceUUID}'),BleErrorCode.CharacteristicNotifyChangeFailed,'Characteristic {characteristicUUID} notify change failed for device {deviceID} and service {serviceUUID}'),BleErrorCode.CharacteristicNotFound,'Characteristic {characteristicUUID} not found'),BleErrorCode.CharacteristicsNotDiscovered,'Characteristics not discovered for device {deviceID} and service {serviceUUID}'),BleErrorCode.CharacteristicInvalidDataFormat,'Cannot write to characteristic {characteristicUUID} with invalid data format: {internalMessage}'),(0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)(_BleErrorCodeMessage,BleErrorCode.DescriptorsDiscoveryFailed,'Descriptor {descriptorUUID} discovery failed for device {deviceID}, service {serviceUUID} and characteristic {characteristicUUID}'),BleErrorCode.DescriptorWriteFailed,'Descriptor {descriptorUUID} write failed for device {deviceID}, service {serviceUUID} and characteristic {characteristicUUID}'),BleErrorCode.DescriptorReadFailed,'Descriptor {descriptorUUID} read failed for device {deviceID}, service {serviceUUID} and characteristic {characteristicUUID}'),BleErrorCode.DescriptorNotFound,'Descriptor {descriptorUUID} not found'),BleErrorCode.DescriptorsNotDiscovered,'Descriptors not discovered for device {deviceID}, service {serviceUUID} and characteristic {characteristicUUID}'),BleErrorCode.DescriptorInvalidDataFormat,'Cannot write to descriptor {descriptorUUID} with invalid data format: {internalMessage}'),BleErrorCode.DescriptorWriteNotAllowed,"Cannot write to descriptor {descriptorUUID}. It's not allowed by iOS and therefore forbidden on Android as well."),BleErrorCode.ScanStartFailed,'Cannot start scanning operation'),BleErrorCode.LocationServicesDisabled,'Location services are disabled'));var BleATTErrorCode=exports.BleATTErrorCode={Success:0,InvalidHandle:1,ReadNotPermitted:2,WriteNotPermitted:3,InvalidPdu:4,InsufficientAuthentication:5,RequestNotSupported:6,InvalidOffset:7,InsufficientAuthorization:8,PrepareQueueFull:9,AttributeNotFound:10,AttributeNotLong:11,InsufficientEncryptionKeySize:12,InvalidAttributeValueLength:13,UnlikelyError:14,InsufficientEncryption:15,UnsupportedGroupType:16,InsufficientResources:17};var BleIOSErrorCode=exports.BleIOSErrorCode={Unknown:0,InvalidParameters:1,InvalidHandle:2,NotConnected:3,OutOfSpace:4,OperationCancelled:5,ConnectionTimeout:6,PeripheralDisconnected:7,UuidNotAllowed:8,AlreadyAdvertising:9,ConnectionFailed:10,ConnectionLimitReached:11,UnknownDevice:12};var BleAndroidErrorCode=exports.BleAndroidErrorCode={NoResources:0x80,InternalError:0x81,WrongState:0x82,DbFull:0x83,Busy:0x84,Error:0x85,CmdStarted:0x86,IllegalParameter:0x87,Pending:0x88,AuthFail:0x89,More:0x8a,InvalidCfg:0x8b,ServiceStarted:0x8c,EncrypedNoMitm:0x8d,NotEncrypted:0x8e,Congested:0x8f};